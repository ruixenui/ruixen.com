{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "inline-analytics-table",
  "type": "registry:ui",
  "title": "Inline Analytics Table",
  "description": "Glass table with spring-animated inline progress bars and trend arrows. Row click selection with audio tick.",
  "dependencies": [
    "motion"
  ],
  "files": [
    {
      "path": "registry/ruixenui/inline-analytics-table.tsx",
      "content": "\"use client\";\n\nimport { useState, useRef } from \"react\";\nimport { motion } from \"motion/react\";\n\n/**\n * Inline Analytics Table — Rauno Freiberg craft.\n *\n * Glass table with animated inline progress bars and trend arrows.\n * Progress bars spring-animate on mount. Trend arrows bounce in.\n * Row hover brightening. Audio tick on row click.\n */\n\n/* ── Audio ── */\n\nlet _a: AudioContext | null = null;\nlet _b: AudioBuffer | null = null;\nfunction getCtx(): AudioContext {\n  if (!_a) _a = new (window.AudioContext || (window as unknown as { webkitAudioContext: typeof AudioContext }).webkitAudioContext)();\n  if (_a.state === \"suspended\") _a.resume();\n  return _a;\n}\nfunction getBuf(ac: AudioContext): AudioBuffer {\n  if (_b && _b.sampleRate === ac.sampleRate) return _b;\n  const len = Math.floor(ac.sampleRate * 0.003);\n  const buf = ac.createBuffer(1, len, ac.sampleRate);\n  const ch = buf.getChannelData(0);\n  for (let i = 0; i < len; i++) ch[i] = (Math.random() * 2 - 1) * (1 - i / len) ** 4;\n  _b = buf; return buf;\n}\nfunction tick(ref: React.MutableRefObject<number>) {\n  const now = performance.now();\n  if (now - ref.current < 25) return;\n  ref.current = now;\n  try { const ac = getCtx(); const s = ac.createBufferSource(); const g = ac.createGain(); s.buffer = getBuf(ac); g.gain.value = 0.06; s.connect(g).connect(ac.destination); s.start(); } catch { /* silent */ }\n}\n\n/* ── Types ── */\n\ninterface AnalyticsItem {\n  id: string;\n  region: string;\n  sales: number;\n  revenue: number;\n  growth: number;\n}\n\ninterface InlineAnalyticsTableProps {\n  data?: AnalyticsItem[];\n  sound?: boolean;\n}\n\n/* ── Defaults ── */\n\nconst DEFAULTS: AnalyticsItem[] = [\n  { id: \"1\", region: \"North America\", sales: 1200, revenue: 25000, growth: 12 },\n  { id: \"2\", region: \"Europe\", sales: 900, revenue: 18000, growth: -5 },\n  { id: \"3\", region: \"Asia\", sales: 1500, revenue: 30000, growth: 20 },\n  { id: \"4\", region: \"South America\", sales: 600, revenue: 10000, growth: 8 },\n  { id: \"5\", region: \"Africa\", sales: 400, revenue: 7000, growth: -3 },\n];\n\n/* ── CSS ── */\n\nconst CSS = `.iat{--t-bg:rgba(255,255,255,.72);--t-border:rgba(0,0,0,.06);--t-shadow:0 0 0 .5px rgba(0,0,0,.04),0 2px 4px rgba(0,0,0,.04),0 8px 24px rgba(0,0,0,.06);--t-ink:0,0,0;--t-ok:#34C759;--t-err:#FF3B30;--t-bar:rgba(0,0,0,.06)}.dark .iat,[data-theme=\"dark\"] .iat{--t-bg:rgba(30,30,32,.82);--t-border:rgba(255,255,255,.06);--t-shadow:0 0 0 .5px rgba(255,255,255,.04),0 2px 4px rgba(0,0,0,.2),0 8px 24px rgba(0,0,0,.3);--t-ink:255,255,255;--t-ok:#30D158;--t-err:#FF453A;--t-bar:rgba(255,255,255,.06)}.iat-row{transition:background .1s}.iat-row:hover{background:rgba(var(--t-ink),.03)}`;\n\nconst TH: React.CSSProperties = {\n  padding: \"10px 16px\", fontSize: 11, fontWeight: 520,\n  color: \"rgba(var(--t-ink),.4)\", letterSpacing: \"0.04em\",\n  textTransform: \"uppercase\", textAlign: \"left\", whiteSpace: \"nowrap\",\n  borderBottom: \"1px solid var(--t-border)\",\n};\n\nconst TD: React.CSSProperties = {\n  padding: \"10px 16px\", fontSize: 13, fontWeight: 420,\n  color: \"rgba(var(--t-ink),.7)\",\n  borderBottom: \"1px solid rgba(var(--t-ink),.03)\", whiteSpace: \"nowrap\",\n};\n\n/* ── Helpers ── */\n\nfunction maxVal(data: AnalyticsItem[], key: \"sales\" | \"revenue\") {\n  return Math.max(...data.map((d) => d[key]));\n}\n\n/* ── Component ── */\n\nexport function InlineAnalyticsTable({\n  data = DEFAULTS,\n  sound = true,\n}: InlineAnalyticsTableProps) {\n  const lastSound = useRef(0);\n  const [selected, setSelected] = useState<string | null>(null);\n  const maxSales = maxVal(data, \"sales\");\n  const maxRev = maxVal(data, \"revenue\");\n  const totalRev = data.reduce((s, d) => s + d.revenue, 0);\n\n  return (\n    <div className=\"iat\" style={{\n      width: \"100%\", maxWidth: 680,\n      background: \"var(--t-bg)\", border: \"1px solid var(--t-border)\",\n      boxShadow: \"var(--t-shadow)\", borderRadius: 14,\n      backdropFilter: \"blur(16px)\", WebkitBackdropFilter: \"blur(16px)\",\n      overflow: \"hidden\",\n    }}>\n      <style dangerouslySetInnerHTML={{ __html: CSS }} />\n\n      <table style={{ width: \"100%\", borderCollapse: \"collapse\" }}>\n        <thead>\n          <tr>\n            <th style={TH}>Region</th>\n            <th style={TH}>Sales</th>\n            <th style={TH}>Revenue</th>\n            <th style={TH}>Growth</th>\n            <th style={{ ...TH, textAlign: \"center\", width: 48 }}>Trend</th>\n          </tr>\n        </thead>\n        <tbody>\n          {data.map((item) => {\n            const isSelected = item.id === selected;\n            return (\n              <tr\n                key={item.id}\n                className=\"iat-row\"\n                onClick={() => { setSelected(isSelected ? null : item.id); if (sound) tick(lastSound); }}\n                style={{\n                  cursor: \"pointer\",\n                  background: isSelected ? \"rgba(var(--t-ink),.04)\" : undefined,\n                }}\n              >\n                <td style={{ ...TD, fontWeight: 500, color: \"rgba(var(--t-ink),.85)\" }}>{item.region}</td>\n                <td style={TD}>\n                  <div style={{ display: \"flex\", alignItems: \"center\", gap: 8 }}>\n                    <span style={{ fontVariantNumeric: \"tabular-nums\", minWidth: 36 }}>{item.sales.toLocaleString()}</span>\n                    <div style={{ flex: 1, height: 4, borderRadius: 2, background: \"var(--t-bar)\", overflow: \"hidden\", maxWidth: 80 }}>\n                      <motion.div\n                        initial={{ width: 0 }}\n                        animate={{ width: `${(item.sales / maxSales) * 100}%` }}\n                        transition={{ type: \"spring\", stiffness: 300, damping: 30, delay: 0.1 }}\n                        style={{ height: \"100%\", borderRadius: 2, background: \"rgba(var(--t-ink),.2)\" }}\n                      />\n                    </div>\n                  </div>\n                </td>\n                <td style={TD}>\n                  <div style={{ display: \"flex\", alignItems: \"center\", gap: 8 }}>\n                    <span style={{ fontVariantNumeric: \"tabular-nums\", minWidth: 48 }}>${item.revenue.toLocaleString()}</span>\n                    <div style={{ flex: 1, height: 4, borderRadius: 2, background: \"var(--t-bar)\", overflow: \"hidden\", maxWidth: 80 }}>\n                      <motion.div\n                        initial={{ width: 0 }}\n                        animate={{ width: `${(item.revenue / maxRev) * 100}%` }}\n                        transition={{ type: \"spring\", stiffness: 300, damping: 30, delay: 0.15 }}\n                        style={{ height: \"100%\", borderRadius: 2, background: \"rgba(var(--t-ink),.2)\" }}\n                      />\n                    </div>\n                  </div>\n                </td>\n                <td style={TD}>\n                  <span style={{\n                    fontVariantNumeric: \"tabular-nums\",\n                    fontWeight: 500,\n                    color: item.growth >= 0 ? \"var(--t-ok)\" : \"var(--t-err)\",\n                  }}>\n                    {item.growth >= 0 ? \"+\" : \"\"}{item.growth}%\n                  </span>\n                </td>\n                <td style={{ ...TD, textAlign: \"center\" }}>\n                  <motion.div\n                    initial={{ scale: 0, opacity: 0 }}\n                    animate={{ scale: 1, opacity: 1 }}\n                    transition={{ type: \"spring\", stiffness: 400, damping: 20, delay: 0.2 }}\n                  >\n                    <svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\">\n                      {item.growth >= 0 ? (\n                        <path d=\"M7 11V3M7 3L3.5 6.5M7 3L10.5 6.5\" stroke=\"var(--t-ok)\" strokeWidth=\"1.4\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                      ) : (\n                        <path d=\"M7 3V11M7 11L3.5 7.5M7 11L10.5 7.5\" stroke=\"var(--t-err)\" strokeWidth=\"1.4\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                      )}\n                    </svg>\n                  </motion.div>\n                </td>\n              </tr>\n            );\n          })}\n        </tbody>\n        <tfoot>\n          <tr>\n            <td colSpan={2} style={{ ...TD, borderBottom: \"none\", fontSize: 11, fontWeight: 450, color: \"rgba(var(--t-ink),.35)\" }}>\n              {data.length} regions\n            </td>\n            <td style={{ ...TD, borderBottom: \"none\", fontWeight: 520, color: \"rgba(var(--t-ink),.65)\", fontVariantNumeric: \"tabular-nums\" }}>\n              ${totalRev.toLocaleString()}\n            </td>\n            <td colSpan={2} style={{ ...TD, borderBottom: \"none\" }} />\n          </tr>\n        </tfoot>\n      </table>\n    </div>\n  );\n}\n\nexport default InlineAnalyticsTable;\n",
      "type": "registry:ui",
      "target": "components/ruixen/inline-analytics-table.tsx"
    }
  ]
}