{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "fine-tune-slider",
  "type": "registry:ui",
  "title": "Fine Tune Slider",
  "description": "A slider with pull-away precision mode — drag normally, pull away from the track to fine-tune values.",
  "dependencies": [
    "motion"
  ],
  "files": [
    {
      "path": "registry/ruixenui/fine-tune-slider.tsx",
      "content": "\"use client\";\n\nimport { motion, AnimatePresence } from \"motion/react\";\nimport { useState, useRef, useCallback } from \"react\";\n\n/**\n * Fine Tune Slider — Rauno Freiberg craft.\n *\n * Hold and drag to scrub. Pull away from the track to fine-tune.\n * Elastic tether visualizes precision depth. Layered thumb shadows.\n * Staggered tick marks. Track glow. Cursor glow under glass.\n */\n\n/* ── Springs — tuned per visual weight ── */\n\nconst spring = {\n  thumb: { type: \"spring\" as const, stiffness: 500, damping: 30 },\n  content: { type: \"spring\" as const, stiffness: 340, damping: 28 },\n  icon: { type: \"spring\" as const, stiffness: 440, damping: 24 },\n  tether: { type: \"spring\" as const, stiffness: 500, damping: 40 },\n};\n\n/* ── Types ── */\n\ninterface FineTuneSliderProps {\n  min?: number;\n  max?: number;\n  step?: number;\n  defaultValue?: number;\n  onChange?: (value: number) => void;\n}\n\n/* ── Helper ── */\n\nfunction snap(v: number, step: number, min: number, max: number) {\n  const s = Math.round(v / step) * step;\n  const d = step < 1 ? (String(step).split(\".\")[1]?.length ?? 0) : 0;\n  return Math.min(max, Math.max(min, Number(s.toFixed(d))));\n}\n\n/* ── Tick positions ── */\n\nconst TICKS = [0, 25, 50, 75, 100];\n\n/* ── Component ── */\n\nexport function FineTuneSlider({\n  min = 0,\n  max = 100,\n  step = 1,\n  defaultValue = 50,\n  onChange,\n}: FineTuneSliderProps) {\n  const [value, setValue] = useState(defaultValue);\n  const [dragging, setDragging] = useState(false);\n  const [hovered, setHovered] = useState(false);\n  const [precision, setPrecision] = useState(1);\n  const [cursorOffset, setCursorOffset] = useState(0);\n  const trackRef = useRef<HTMLDivElement>(null);\n  const drag = useRef({\n    startX: 0,\n    startVal: 0,\n    rect: null as DOMRect | null,\n  });\n\n  /* Cursor glow */\n  const [glowX, setGlowX] = useState(0);\n  const [glowOn, setGlowOn] = useState(false);\n\n  const doSnap = useCallback(\n    (v: number) => snap(v, step, min, max),\n    [min, max, step],\n  );\n\n  /* ── Pointer handlers ── */\n\n  const onDown = useCallback(\n    (e: React.PointerEvent<HTMLDivElement>) => {\n      if (!trackRef.current) return;\n      e.preventDefault();\n      e.currentTarget.setPointerCapture(e.pointerId);\n\n      const rect = trackRef.current.getBoundingClientRect();\n      const pct = Math.max(\n        0,\n        Math.min(1, (e.clientX - rect.left) / rect.width),\n      );\n      const jumped = doSnap(min + pct * (max - min));\n\n      setValue(jumped);\n      onChange?.(jumped);\n      drag.current = { startX: e.clientX, startVal: jumped, rect };\n      setDragging(true);\n    },\n    [min, max, doSnap, onChange],\n  );\n\n  const onMove = useCallback(\n    (e: React.PointerEvent) => {\n      if (!dragging || !drag.current.rect) return;\n      const { startX, startVal, rect } = drag.current;\n      if (rect.width === 0) return;\n\n      const trackCenterY = rect.top + rect.height / 2;\n      const vDist = e.clientY - trackCenterY;\n      setCursorOffset(vDist);\n\n      const p = 1 + Math.abs(vDist) / 60;\n      setPrecision(p);\n\n      const dx = (e.clientX - startX) / p;\n      const dv = (dx / rect.width) * (max - min);\n      const next = doSnap(startVal + dv);\n\n      setValue(next);\n      onChange?.(next);\n    },\n    [dragging, max, min, doSnap, onChange],\n  );\n\n  const onUp = useCallback(() => {\n    setDragging(false);\n    setPrecision(1);\n    setCursorOffset(0);\n  }, []);\n\n  const pct = max > min ? ((value - min) / (max - min)) * 100 : 0;\n  const inPrecision = dragging && precision > 1.4;\n  const active = dragging || hovered;\n\n  /* Tether geometry */\n  const tetherLen = Math.min(Math.abs(cursorOffset), 140);\n  const tetherDown = cursorOffset > 0;\n\n  return (\n    <div className=\"flex w-full items-center justify-center\">\n      <div className=\"relative w-full select-none\">\n        {/* Surface */}\n        <motion.div\n          className=\"relative bg-neutral-900 border border-white/[0.06] px-5 pt-5 pb-4\"\n          style={{\n            borderRadius: 16,\n            overflow: \"visible\",\n            boxShadow:\n              \"inset 0 1px 0 rgba(255,255,255,0.03), 0 1px 3px rgba(0,0,0,0.4), 0 4px 14px rgba(0,0,0,0.2)\",\n          }}\n          animate={{\n            borderColor: inPrecision\n              ? \"rgba(255, 255, 255, 0.12)\"\n              : \"rgba(255, 255, 255, 0.06)\",\n          }}\n          transition={{ duration: 0.3 }}\n          onMouseMove={(e) => {\n            const r = e.currentTarget.getBoundingClientRect();\n            setGlowX(e.clientX - r.left);\n            if (!glowOn) setGlowOn(true);\n          }}\n          onMouseLeave={() => {\n            setGlowOn(false);\n            if (!dragging) setHovered(false);\n          }}\n          onMouseEnter={() => setHovered(true)}\n        >\n          {/* ── Cursor glow — light-under-glass ── */}\n          <div\n            className=\"absolute inset-0 pointer-events-none z-0\"\n            style={{\n              borderRadius: 16,\n              opacity: glowOn ? 1 : 0,\n              transition: \"opacity 0.3s ease\",\n              background: `radial-gradient(120px circle at ${glowX}px 50%, rgba(255,255,255,0.04), transparent)`,\n            }}\n          />\n\n          {/* ── Value row ── */}\n          <div className=\"relative z-10 flex items-baseline justify-between mb-4\">\n            <span className=\"text-[26px] font-[580] tracking-[-0.03em] text-white tabular-nums leading-none\">\n              {value}\n            </span>\n\n            <AnimatePresence>\n              {inPrecision && (\n                <motion.div\n                  className=\"flex items-center gap-1.5\"\n                  initial={{ opacity: 0, x: 8, filter: \"blur(4px)\" }}\n                  animate={{ opacity: 1, x: 0, filter: \"blur(0px)\" }}\n                  exit={{ opacity: 0, x: 8, filter: \"blur(4px)\" }}\n                  transition={{\n                    ...spring.content,\n                    filter: { duration: 0.15, ease: \"easeOut\" },\n                  }}\n                >\n                  <CrosshairIcon />\n                  <span className=\"text-[10px] font-medium tracking-[0.04em] text-neutral-500 uppercase\">\n                    {precision.toFixed(1)}×\n                  </span>\n                </motion.div>\n              )}\n            </AnimatePresence>\n          </div>\n\n          {/* ── Track zone — overflow visible for tether ── */}\n          <div className=\"relative z-10\" style={{ overflow: \"visible\" }}>\n            {/* ── Elastic tether — precision depth visual ── */}\n            <AnimatePresence>\n              {inPrecision && (\n                <motion.div\n                  className=\"absolute pointer-events-none z-20\"\n                  style={{\n                    left: `${pct}%`,\n                    top: \"50%\",\n                    transform: \"translateX(-50%)\",\n                    width: 1,\n                  }}\n                  initial={{ opacity: 0, height: 0 }}\n                  animate={{\n                    opacity: 0.5,\n                    height: tetherLen,\n                    y: tetherDown ? 0 : -tetherLen,\n                  }}\n                  exit={{ opacity: 0, height: 0, y: 0 }}\n                  transition={spring.tether}\n                >\n                  <div\n                    className=\"w-full h-full\"\n                    style={{\n                      background: tetherDown\n                        ? \"linear-gradient(to bottom, rgba(255,255,255,0.5), transparent)\"\n                        : \"linear-gradient(to top, rgba(255,255,255,0.5), transparent)\",\n                    }}\n                  />\n                  {/* Endpoint dot */}\n                  <div\n                    className=\"absolute left-1/2 -translate-x-1/2 w-1 h-1 rounded-full bg-white/40\"\n                    style={tetherDown ? { bottom: -1 } : { top: -1 }}\n                  />\n                </motion.div>\n              )}\n            </AnimatePresence>\n\n            {/* ── Track ── */}\n            <div\n              ref={trackRef}\n              className=\"relative h-2 rounded-full\"\n              style={{\n                touchAction: \"none\",\n                cursor: dragging ? \"grabbing\" : \"ew-resize\",\n                background: \"rgba(255,255,255,0.04)\",\n                boxShadow: \"inset 0 1px 2px rgba(0,0,0,0.3)\",\n              }}\n              onPointerDown={onDown}\n              onPointerMove={onMove}\n              onPointerUp={onUp}\n              onLostPointerCapture={onUp}\n            >\n              {/* Filled portion — glows in precision mode */}\n              <motion.div\n                className=\"absolute inset-y-0 left-0 rounded-full\"\n                style={{ width: `${pct}%` }}\n                animate={{\n                  background: inPrecision\n                    ? \"rgba(255,255,255,0.85)\"\n                    : \"rgba(255,255,255,0.60)\",\n                  boxShadow: inPrecision\n                    ? \"0 0 16px rgba(255,255,255,0.15), 0 0 4px rgba(255,255,255,0.1)\"\n                    : dragging\n                      ? \"0 0 8px rgba(255,255,255,0.06)\"\n                      : \"none\",\n                }}\n                transition={{ duration: 0.25 }}\n              />\n\n              {/* Tick marks — stagger in on interaction */}\n              {TICKS.map((t, i) => (\n                <motion.div\n                  key={t}\n                  className=\"absolute top-full w-px bg-white/[0.08]\"\n                  style={{\n                    left: `${t}%`,\n                    marginTop: 4,\n                    height: t === 50 ? 6 : 4,\n                    transformOrigin: \"top\",\n                  }}\n                  initial={false}\n                  animate={{\n                    opacity: active ? 1 : 0,\n                    scaleY: active ? 1 : 0,\n                  }}\n                  transition={{ ...spring.icon, delay: active ? i * 0.03 : 0 }}\n                />\n              ))}\n\n              {/* Thumb */}\n              <motion.div\n                className=\"absolute top-1/2 z-10\"\n                style={{ left: `${pct}%`, x: \"-50%\", y: \"-50%\" }}\n                animate={{\n                  scale: dragging ? 1.2 : hovered ? 1.06 : 1,\n                }}\n                transition={spring.thumb}\n              >\n                <div\n                  className=\"w-[18px] h-[18px] rounded-full bg-white\"\n                  style={{\n                    boxShadow: inPrecision\n                      ? \"0 0 0 6px rgba(255,255,255,0.05), 0 0 20px rgba(255,255,255,0.1), 0 2px 8px rgba(0,0,0,0.4)\"\n                      : dragging\n                        ? \"0 0 0 4px rgba(255,255,255,0.04), 0 0 12px rgba(255,255,255,0.06), 0 2px 8px rgba(0,0,0,0.4)\"\n                        : hovered\n                          ? \"0 0 0 3px rgba(255,255,255,0.03), 0 1px 6px rgba(0,0,0,0.3)\"\n                          : \"0 1px 4px rgba(0,0,0,0.25)\",\n                    transition: \"box-shadow 0.25s ease\",\n                  }}\n                />\n              </motion.div>\n            </div>\n\n            {/* Min / Max labels — reveal on interaction */}\n            <motion.div\n              className=\"flex justify-between mt-3\"\n              initial={false}\n              animate={{ opacity: active ? 1 : 0 }}\n              transition={{ duration: 0.15, delay: active ? 0.06 : 0 }}\n            >\n              <span className=\"text-[10px] text-neutral-600 tabular-nums\">\n                {min}\n              </span>\n              <span className=\"text-[10px] text-neutral-600 tabular-nums\">\n                {max}\n              </span>\n            </motion.div>\n          </div>\n        </motion.div>\n      </div>\n    </div>\n  );\n}\n\n/* ── Icons ── */\n\nfunction CrosshairIcon() {\n  return (\n    <svg\n      width=\"12\"\n      height=\"12\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      className=\"text-neutral-500\"\n    >\n      <circle cx=\"12\" cy=\"12\" r=\"3\" />\n      <path d=\"M12 2v4\" />\n      <path d=\"M12 18v4\" />\n      <path d=\"M2 12h4\" />\n      <path d=\"M18 12h4\" />\n    </svg>\n  );\n}\n\nexport default FineTuneSlider;\n",
      "type": "registry:ui",
      "target": "components/ruixen/fine-tune-slider.tsx"
    }
  ]
}