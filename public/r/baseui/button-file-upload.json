{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "button-file-upload",
  "type": "registry:ui",
  "title": "Button File Upload",
  "description": "iOS 26 liquid-glass upload pill with filename reveal and clear action.",
  "dependencies": [
    "motion"
  ],
  "files": [
    {
      "path": "registry/ruixenui/button-file-upload.tsx",
      "content": "\"use client\";\n\nimport * as React from \"react\";\nimport { motion, AnimatePresence } from \"motion/react\";\n\n/* ── sound ── */\nlet _a: AudioContext, _b: AudioBuffer;\nconst tick = () => {\n  if (typeof window === \"undefined\") return;\n  if (!_a) {\n    _a = new AudioContext();\n    _b = _a.createBuffer(1, (_a.sampleRate * 0.003) | 0, _a.sampleRate);\n    const d = _b.getChannelData(0);\n    for (let i = 0; i < d.length; i++)\n      d[i] = (Math.random() * 2 - 1) * (1 - i / d.length) ** 4;\n  }\n  const s = _a.createBufferSource();\n  s.buffer = _b;\n  const g = _a.createGain();\n  g.gain.value = 0.08;\n  s.connect(g).connect(_a.destination);\n  s.start();\n};\n\n/* ── theme ── */\nconst CSS = `\n.fu{\n  --fu-glass:linear-gradient(180deg,rgba(255,255,255,0.78),rgba(255,255,255,0.62));\n  --fu-border:rgba(0,0,0,0.06);\n  --fu-shadow:0 0 1px rgba(0,0,0,0.04),0 2px 8px rgba(0,0,0,0.04),inset 0 1px 0 rgba(255,255,255,0.8);\n  --fu-hi:rgba(0,0,0,0.88);\n  --fu-dim:rgba(0,0,0,0.42);\n  --fu-ok:#34C759\n}\n.dark .fu,[data-theme=\"dark\"] .fu{\n  --fu-glass:linear-gradient(180deg,rgba(255,255,255,0.05),rgba(255,255,255,0.02));\n  --fu-border:rgba(255,255,255,0.07);\n  --fu-shadow:0 1px 3px rgba(0,0,0,0.08),inset 0 1px 0 rgba(255,255,255,0.04);\n  --fu-hi:rgba(255,255,255,0.88);\n  --fu-dim:rgba(255,255,255,0.28);\n  --fu-ok:#30D158\n}`;\n\n/* ── component ── */\nexport interface ButtonFileUploadProps {\n  onFileSelect: (files: FileList) => void;\n  accept?: string;\n  multiple?: boolean;\n  label?: string;\n  sound?: boolean;\n  style?: React.CSSProperties;\n}\n\nexport function ButtonFileUpload({\n  onFileSelect,\n  accept = \"*/*\",\n  multiple = false,\n  label = \"Upload\",\n  sound = true,\n  style,\n}: ButtonFileUploadProps) {\n  const inputRef = React.useRef<HTMLInputElement>(null);\n  const [file, setFile] = React.useState<string | null>(null);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files.length > 0) {\n      onFileSelect(e.target.files);\n      setFile(\n        e.target.files.length === 1\n          ? e.target.files[0].name\n          : `${e.target.files.length} files`,\n      );\n      if (sound) tick();\n      e.target.value = \"\";\n    }\n  };\n\n  const clear = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    setFile(null);\n    if (sound) tick();\n  };\n\n  return (\n    <>\n      <style dangerouslySetInnerHTML={{ __html: CSS }} />\n      <input\n        ref={inputRef}\n        type=\"file\"\n        accept={accept}\n        multiple={multiple}\n        onChange={handleChange}\n        style={{ display: \"none\" }}\n      />\n      <motion.button\n        className=\"fu\"\n        onClick={() => inputRef.current?.click()}\n        whileHover={{ scale: 1.04 }}\n        whileTap={{ scale: 0.96 }}\n        transition={{ type: \"spring\", stiffness: 500, damping: 30 }}\n        style={{\n          display: \"inline-flex\",\n          alignItems: \"center\",\n          gap: 6,\n          padding: \"8px 14px\",\n          borderRadius: 10,\n          border: \"1px solid var(--fu-border)\",\n          background: \"var(--fu-glass)\",\n          boxShadow: \"var(--fu-shadow)\",\n          backdropFilter: \"blur(24px)\",\n          WebkitBackdropFilter: \"blur(24px)\",\n          color: \"var(--fu-hi)\",\n          fontSize: 13,\n          fontWeight: 500,\n          cursor: \"pointer\",\n          outline: \"none\",\n          userSelect: \"none\",\n          ...style,\n        }}\n      >\n        {/* upload arrow icon */}\n        <svg\n          width=\"14\"\n          height=\"14\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n          style={{ color: \"var(--fu-dim)\" }}\n        >\n          <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\" />\n          <polyline points=\"17 8 12 3 7 8\" />\n          <line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\" />\n        </svg>\n        <AnimatePresence mode=\"wait\" initial={false}>\n          {file ? (\n            <motion.span\n              key=\"file\"\n              initial={{ opacity: 0, y: 4 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -4 }}\n              transition={{ type: \"spring\", stiffness: 500, damping: 30 }}\n              style={{\n                display: \"inline-flex\",\n                alignItems: \"center\",\n                gap: 4,\n                color: \"var(--fu-ok)\",\n              }}\n            >\n              <span\n                style={{\n                  maxWidth: 120,\n                  overflow: \"hidden\",\n                  textOverflow: \"ellipsis\",\n                  whiteSpace: \"nowrap\",\n                }}\n              >\n                {file}\n              </span>\n              <span\n                onClick={clear}\n                style={{\n                  display: \"inline-flex\",\n                  alignItems: \"center\",\n                  justifyContent: \"center\",\n                  width: 14,\n                  height: 14,\n                  borderRadius: 7,\n                  fontSize: 10,\n                  cursor: \"pointer\",\n                  opacity: 0.6,\n                }}\n              >\n                ✕\n              </span>\n            </motion.span>\n          ) : (\n            <motion.span\n              key=\"label\"\n              initial={{ opacity: 0, y: 4 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -4 }}\n              transition={{ type: \"spring\", stiffness: 500, damping: 30 }}\n            >\n              {label}\n            </motion.span>\n          )}\n        </AnimatePresence>\n      </motion.button>\n    </>\n  );\n}\n\nexport default ButtonFileUpload;\n",
      "type": "registry:ui",
      "target": "components/ruixen/button-file-upload.tsx"
    }
  ]
}