{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "reorderable-table",
  "type": "registry:ui",
  "title": "Reorderable Table",
  "description": "A feature-rich table with column reordering, visibility toggle, and search functionality.",
  "dependencies": [
    "lucide-react",
    "@base-ui/react"
  ],
  "registryDependencies": [
    "table",
    "input"
  ],
  "files": [
    {
      "path": "registry/ruixenui/reorderable-table.tsx",
      "content": "\"use client\";\n\nimport * as React from \"react\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableFooter,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Button } from \"@/components/ui/button\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\nimport { Input } from \"@/components/ui/input\";\nimport { ChevronsLeft, ChevronsRight } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\n/* --------------------- Types ---------------------- */\nexport type ReorderableRow = Record<string, any>;\n\nexport type ColumnDef<T = ReorderableRow> = {\n  key: keyof T;\n  label: string;\n  width?: string;\n  sticky?: boolean;\n  render?: (row: T) => React.ReactNode;\n};\n\nexport interface ReorderableTableProps<T extends ReorderableRow> {\n  data?: T[];\n  columns?: ColumnDef<T>[];\n  lsOrderKey?: string;\n  lsVisibleKey?: string;\n  searchable?: boolean;\n  title?: string;\n}\n\n/* ------------------ Default Data ------------------- */\nconst defaultRows = [\n  {\n    id: 1,\n    name: \"Arjun Mehta\",\n    email: \"arjun.mehta@company.com\",\n    role: \"Manager\",\n    location: \"Bangalore\",\n    status: \"Active\",\n    balance: 1250,\n  },\n  {\n    id: 2,\n    name: \"Hannah Park\",\n    email: \"hannah.park@company.com\",\n    role: \"Designer\",\n    location: \"Seoul\",\n    status: \"Active\",\n    balance: 600,\n  },\n  {\n    id: 3,\n    name: \"Oliver Scott\",\n    email: \"oliver.scott@company.com\",\n    role: \"Engineer\",\n    location: \"Manchester\",\n    status: \"Inactive\",\n    balance: 650,\n  },\n  {\n    id: 4,\n    name: \"Camila Torres\",\n    email: \"camila.torres@company.com\",\n    role: \"HR\",\n    location: \"Bogotá\",\n    status: \"Active\",\n    balance: 0,\n  },\n  {\n    id: 5,\n    name: \"Kenji Tanaka\",\n    email: \"kenji.tanaka@company.com\",\n    role: \"Developer\",\n    location: \"Osaka\",\n    status: \"Suspended\",\n    balance: -1000,\n  },\n];\n\nconst defaultColumns: ColumnDef<(typeof defaultRows)[0]>[] = [\n  { key: \"name\", label: \"Name\", width: \"220px\" },\n  { key: \"email\", label: \"Email\", width: \"260px\" },\n  { key: \"role\", label: \"Role\", width: \"140px\" },\n  { key: \"location\", label: \"Location\", width: \"160px\" },\n  {\n    key: \"status\",\n    label: \"Status\",\n    width: \"120px\",\n    render: (row) => (\n      <span\n        className={cn(\n          \"inline-block px-2 py-0.5 rounded-md text-sm font-medium\",\n          row.status === \"Active\"\n            ? \"bg-green-100 text-green-800 dark:bg-green-900/30\"\n            : row.status === \"Inactive\"\n              ? \"bg-slate-100 text-slate-800 dark:bg-slate-800/30\"\n              : \"bg-red-100 text-red-800 dark:bg-red-900/30\",\n        )}\n      >\n        {row.status}\n      </span>\n    ),\n  },\n  {\n    key: \"balance\",\n    label: \"Balance\",\n    width: \"120px\",\n    render: (row) => `$${row.balance.toLocaleString()}`,\n  },\n];\n\n/* ---------------- Component ---------------- */\nexport default function ReorderableTable<T extends ReorderableRow>({\n  data = defaultRows as unknown as T[],\n  columns = defaultColumns as unknown as ColumnDef<T>[],\n  lsOrderKey = \"reorderable_table_order_v1\",\n  lsVisibleKey = \"reorderable_table_visible_v1\",\n  searchable = true,\n  title = \"Reorderable Table\",\n}: ReorderableTableProps<T>) {\n  const columnKeys = columns.map((c) => c.key as string);\n\n  // state\n  const [rows] = useState<T[]>(data);\n  const [query, setQuery] = useState(\"\");\n\n  const [columnOrder, setColumnOrder] = useState<string[]>(() => {\n    if (typeof window === \"undefined\") return columnKeys;\n    return JSON.parse(localStorage.getItem(lsOrderKey) || \"null\") || columnKeys;\n  });\n\n  const [visible, setVisible] = useState<Record<string, boolean>>(() => {\n    if (typeof window === \"undefined\") {\n      const initial: Record<string, boolean> = {};\n      columnKeys.forEach((k) => (initial[k] = true));\n      return initial;\n    }\n    const saved = JSON.parse(localStorage.getItem(lsVisibleKey) || \"null\");\n    if (saved) return saved;\n    const initial: Record<string, boolean> = {};\n    columnKeys.forEach((k) => (initial[k] = true));\n    return initial;\n  });\n\n  /* --- persist layout --- */\n  useEffect(() => {\n    if (typeof window !== \"undefined\") {\n      localStorage.setItem(lsOrderKey, JSON.stringify(columnOrder));\n    }\n  }, [columnOrder, lsOrderKey]);\n\n  useEffect(() => {\n    if (typeof window !== \"undefined\") {\n      localStorage.setItem(lsVisibleKey, JSON.stringify(visible));\n    }\n  }, [visible, lsVisibleKey]);\n\n  /* --- ensure order is in sync with columns --- */\n  useEffect(() => {\n    setColumnOrder((prev) => {\n      const missing = columnKeys.filter((k) => !prev.includes(k));\n      return [...prev.filter((k) => columnKeys.includes(k)), ...missing];\n    });\n  }, [columnKeys]);\n\n  const orderedColumns = useMemo(\n    () =>\n      columnOrder\n        .map((k) => columns.find((c) => c.key === k))\n        .filter(Boolean) as ColumnDef<T>[],\n    [columnOrder, columns],\n  );\n\n  /* --- Search --- */\n  const filtered = useMemo(() => {\n    if (!query) return rows;\n    const q = query.toLowerCase();\n    return rows.filter((r) =>\n      Object.values(r).some((v) => String(v).toLowerCase().includes(q)),\n    );\n  }, [rows, query]);\n\n  /* --- Drag & Drop --- */\n  const dragSrc = React.useRef<number | null>(null);\n  const onDragStart = (e: React.DragEvent, i: number) => {\n    dragSrc.current = i;\n    e.dataTransfer.effectAllowed = \"move\";\n  };\n  const onDragOver = (e: React.DragEvent) => e.preventDefault();\n  const onDrop = (e: React.DragEvent, i: number) => {\n    e.preventDefault();\n    const src = dragSrc.current;\n    if (src === null || src === i) return;\n    setColumnOrder((prev) => {\n      const next = [...prev];\n      const [moved] = next.splice(src, 1);\n      next.splice(i, 0, moved);\n      return next;\n    });\n    dragSrc.current = null;\n  };\n\n  const moveColumn = (key: string, dir: -1 | 1) => {\n    setColumnOrder((prev) => {\n      const idx = prev.indexOf(key);\n      const nextIdx = idx + dir;\n      if (idx < 0 || nextIdx < 0 || nextIdx >= prev.length) return prev;\n      const next = [...prev];\n      const [moved] = next.splice(idx, 1);\n      next.splice(nextIdx, 0, moved);\n      return next;\n    });\n  };\n\n  const toggleVisible = (key: string) =>\n    setVisible((prev) => ({ ...prev, [key]: !prev[key] }));\n\n  const resetLayout = () => {\n    setColumnOrder(columnKeys);\n    const all: Record<string, boolean> = {};\n    columnKeys.forEach((k) => (all[k] = true));\n    setVisible(all);\n    localStorage.removeItem(lsOrderKey);\n    localStorage.removeItem(lsVisibleKey);\n  };\n\n  return (\n    <div className=\"w-full max-w-6xl mx-auto\">\n      <div className=\"flex justify-between items-center mb-4\">\n        <h2 className=\"text-xl font-semibold\">{title}</h2>\n        {searchable && (\n          <div className=\"flex gap-2\">\n            <Input\n              placeholder=\"Search...\"\n              value={query}\n              onChange={(e) => setQuery(e.target.value)}\n              className=\"w-64\"\n            />\n            <Button variant=\"outline\" onClick={() => setQuery(\"\")}>\n              Clear\n            </Button>\n          </div>\n        )}\n        <Popover>\n          <PopoverTrigger asChild>\n            <Button variant=\"outline\">Columns</Button>\n          </PopoverTrigger>\n          <PopoverContent className=\"w-48\">\n            <div className=\"flex flex-col gap-2\">\n              {columns.map((c) => (\n                <label key={String(c.key)} className=\"flex items-center gap-2\">\n                  <Checkbox\n                    checked={!!visible[String(c.key)]}\n                    onCheckedChange={() => toggleVisible(String(c.key))}\n                  />\n                  <span className=\"text-sm\">{c.label}</span>\n                </label>\n              ))}\n              <div className=\"flex justify-between pt-2\">\n                <Button variant=\"ghost\" size=\"sm\" onClick={resetLayout}>\n                  Reset\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => {\n                    const visKeys = Object.entries(visible)\n                      .filter(([, v]) => v)\n                      .map(([k]) => k);\n                    setColumnOrder((prev) => [\n                      ...visKeys,\n                      ...prev.filter((k) => !visKeys.includes(k)),\n                    ]);\n                  }}\n                >\n                  Bring visible front\n                </Button>\n              </div>\n            </div>\n          </PopoverContent>\n        </Popover>\n      </div>\n\n      <div className=\"border rounded-md overflow-auto\">\n        <Table className=\"min-w-full border-separate border-spacing-0\">\n          <TableHeader className=\"sticky top-0 bg-background/90 backdrop-blur-sm z-10\">\n            <TableRow>\n              {orderedColumns.map((col, idx) =>\n                visible[String(col.key)] ? (\n                  <TableHead key={String(col.key)} style={{ width: col.width }}>\n                    <div\n                      draggable\n                      onDragStart={(e) => onDragStart(e, idx)}\n                      onDragOver={onDragOver}\n                      onDrop={(e) => onDrop(e, idx)}\n                      className=\"flex items-center justify-between select-none gap-2\"\n                    >\n                      <span>{col.label}</span>\n                      <span className=\"flex gap-1\">\n                        <Button\n                          size=\"icon\"\n                          variant=\"ghost\"\n                          onClick={() => moveColumn(String(col.key), -1)}\n                        >\n                          <ChevronsLeft className=\"h-4 w-4\" />\n                        </Button>\n                        <Button\n                          size=\"icon\"\n                          variant=\"ghost\"\n                          onClick={() => moveColumn(String(col.key), 1)}\n                        >\n                          <ChevronsRight className=\"h-4 w-4\" />\n                        </Button>\n                      </span>\n                    </div>\n                  </TableHead>\n                ) : null,\n              )}\n            </TableRow>\n          </TableHeader>\n\n          <TableBody>\n            {filtered.map((row, i) => (\n              <TableRow key={i} className=\"hover:bg-muted/10\">\n                {orderedColumns.map((col) =>\n                  visible[String(col.key)] ? (\n                    <TableCell key={String(col.key)}>\n                      {col.render ? col.render(row) : String(row[col.key])}\n                    </TableCell>\n                  ) : null,\n                )}\n              </TableRow>\n            ))}\n          </TableBody>\n\n          <TableFooter className=\"sticky bottom-0 bg-background/90\">\n            <TableRow>\n              <TableCell\n                colSpan={\n                  orderedColumns.filter((c) => visible[String(c.key)]).length -\n                  1\n                }\n              >\n                Total: {filtered.length} rows\n              </TableCell>\n              {visible[\"balance\"] ? (\n                <TableCell className=\"text-right font-semibold\">\n                  $\n                  {filtered\n                    .reduce((sum, r: any) => sum + (r.balance || 0), 0)\n                    .toLocaleString()}\n                </TableCell>\n              ) : (\n                <TableCell className=\"text-right\">—</TableCell>\n              )}\n            </TableRow>\n          </TableFooter>\n        </Table>\n      </div>\n    </div>\n  );\n}\n",
      "type": "registry:ui",
      "target": "components/ruixen/reorderable-table.tsx"
    },
    {
      "path": "components/ui/button.tsx",
      "content": "import * as React from \"react\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground shadow hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background text-foreground shadow-sm hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n        rainbow:\n          \"group relative animate-rainbow cursor-pointer border-0 bg-[linear-gradient(#121213,#121213),linear-gradient(#121213_50%,rgba(18,18,19,0.6)_80%,rgba(18,18,19,0)),linear-gradient(90deg,var(--color-1),var(--color-5),var(--color-3),var(--color-4),var(--color-2))] bg-[length:200%] text-primary-foreground [background-clip:padding-box,border-box,border-box] [background-origin:border-box] [border:calc(0.08*1rem)_solid_transparent] before:absolute before:bottom-[-20%] before:left-1/2 before:z-0 before:h-1/5 before:w-3/5 before:-translate-x-1/2 before:animate-rainbow before:bg-[linear-gradient(90deg,var(--color-1),var(--color-5),var(--color-3),var(--color-4),var(--color-2))] before:[filter:blur(calc(0.8*1rem))] dark:bg-[linear-gradient(#fff,#fff),linear-gradient(#fff_50%,rgba(255,255,255,0.6)_80%,rgba(0,0,0,0)),linear-gradient(90deg,var(--color-1),var(--color-5),var(--color-3),var(--color-4),var(--color-2))]\",\n        \"rainbow-outline\":\n          \"group relative animate-rainbow cursor-pointer border-0 border-input bg-[linear-gradient(#fff,#fff),linear-gradient(#fff_50%,rgba(255,255,255,0.6)_80%,rgba(0,0,0,0)),linear-gradient(90deg,var(--color-1),var(--color-5),var(--color-3),var(--color-4),var(--color-2))] bg-[length:200%] px-4 text-foreground shadow-sm [background-clip:padding-box,border-box,border-box] [background-origin:border-box] [border:calc(0.08*1rem)_solid_transparent] before:absolute before:bottom-[-20%] before:left-1/2 before:z-0 before:h-1/5 before:w-3/5 before:-translate-x-1/2 before:animate-rainbow before:bg-[linear-gradient(90deg,var(--color-1),var(--color-5),var(--color-3),var(--color-4),var(--color-2))] before:[filter:blur(calc(0.8*1rem))] dark:bg-[linear-gradient(#121213,#121213),linear-gradient(#121213_50%,rgba(18,18,19,0.6)_80%,rgba(18,18,19,0)),linear-gradient(90deg,var(--color-1),var(--color-5),var(--color-3),var(--color-4),var(--color-2))]\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2\",\n        sm: \"h-8 rounded-xl px-3 text-xs\",\n        md: \"h-10 rounded-xl px-4 text-sm\",\n        lg: \"h-11 rounded-xl px-8\",\n        icon: \"size-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n);\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean;\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, children, ...props }, ref) => {\n    if (asChild && React.isValidElement(children)) {\n      return React.cloneElement(children as React.ReactElement<any>, {\n        className: cn(\n          buttonVariants({ variant, size, className }),\n          (children.props as any).className,\n        ),\n        ref,\n        ...props,\n      });\n    }\n\n    return (\n      <button\n        data-slot=\"button\"\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      >\n        {children}\n      </button>\n    );\n  },\n);\nButton.displayName = \"Button\";\n\nexport { Button, buttonVariants };\n",
      "type": "registry:ui",
      "target": "components/ui/button.tsx"
    },
    {
      "path": "components/ui/checkbox.tsx",
      "content": "\"use client\";\n\nimport * as React from \"react\";\nimport { Checkbox as CheckboxPrimitive } from \"@base-ui/react/checkbox\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Checkbox = React.forwardRef<\n  HTMLButtonElement,\n  Omit<\n    React.ComponentProps<typeof CheckboxPrimitive.Root>,\n    \"checked\" | \"onCheckedChange\"\n  > & {\n    checked?: boolean | \"indeterminate\";\n    onCheckedChange?: (checked: boolean | \"indeterminate\") => void;\n  }\n>(({ className, checked, onCheckedChange, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    checked={checked === \"indeterminate\" ? false : checked}\n    indeterminate={checked === \"indeterminate\"}\n    onCheckedChange={(value) => onCheckedChange?.(value as boolean)}\n    className={cn(\n      \"peer size-4 shrink-0 rounded border border-input shadow-sm shadow-black/5 outline-offset-2 focus-visible:outline focus-visible:outline-2 focus-visible:outline-ring/70 disabled:cursor-not-allowed disabled:opacity-50 data-[checked]:border-primary data-[indeterminate]:border-primary data-[checked]:bg-primary data-[indeterminate]:bg-primary data-[checked]:text-primary-foreground data-[indeterminate]:text-primary-foreground\",\n      className,\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator className=\"flex items-center justify-center text-current\">\n      {checked === \"indeterminate\" ? (\n        <svg\n          width=\"9\"\n          height=\"9\"\n          viewBox=\"0 0 9 9\"\n          fill=\"currentcolor\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path\n            fillRule=\"evenodd\"\n            clipRule=\"evenodd\"\n            d=\"M0.75 4.5C0.75 4.08579 1.08579 3.75 1.5 3.75H7.5C7.91421 3.75 8.25 4.08579 8.25 4.5C8.25 4.91421 7.91421 5.25 7.5 5.25H1.5C1.08579 5.25 0.75 4.91421 0.75 4.5Z\"\n          />\n        </svg>\n      ) : (\n        <svg\n          width=\"9\"\n          height=\"9\"\n          viewBox=\"0 0 9 9\"\n          fill=\"currentcolor\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path\n            fillRule=\"evenodd\"\n            clipRule=\"evenodd\"\n            d=\"M8.53547 0.62293C8.88226 0.849446 8.97976 1.3142 8.75325 1.66099L4.5083 8.1599C4.38833 8.34356 4.19397 8.4655 3.9764 8.49358C3.75883 8.52167 3.53987 8.45309 3.3772 8.30591L0.616113 5.80777C0.308959 5.52987 0.285246 5.05559 0.563148 4.74844C0.84105 4.44128 1.31533 4.41757 1.62249 4.69547L3.73256 6.60459L7.49741 0.840706C7.72393 0.493916 8.18868 0.396414 8.53547 0.62293Z\"\n          />\n        </svg>\n      )}\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n));\nCheckbox.displayName = \"Checkbox\";\n\nexport { Checkbox };\n",
      "type": "registry:ui",
      "target": "components/ui/checkbox.tsx"
    },
    {
      "path": "components/ui/popover.tsx",
      "content": "\"use client\";\n\nimport * as React from \"react\";\nimport { Popover as PopoverPrimitive } from \"@base-ui/react/popover\";\n\nimport { cn } from \"@/lib/utils\";\n\nfunction Popover({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Root>) {\n  return <PopoverPrimitive.Root data-slot=\"popover\" {...props} />;\n}\n\nfunction PopoverTrigger({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Trigger>) {\n  return <PopoverPrimitive.Trigger data-slot=\"popover-trigger\" {...props} />;\n}\n\nfunction PopoverContent({\n  className,\n  align = \"center\",\n  sideOffset = 4,\n  side = \"bottom\",\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Popup> & {\n  align?: \"start\" | \"center\" | \"end\";\n  sideOffset?: number;\n  side?: \"top\" | \"bottom\" | \"left\" | \"right\";\n}) {\n  return (\n    <PopoverPrimitive.Portal>\n      <PopoverPrimitive.Positioner\n        sideOffset={sideOffset}\n        side={side}\n        align={align}\n      >\n        <PopoverPrimitive.Popup\n          data-slot=\"popover-content\"\n          className={cn(\n            \"bg-popover text-popover-foreground data-[open]:animate-in data-[closed]:animate-out data-[closed]:fade-out-0 data-[open]:fade-in-0 data-[closed]:zoom-out-95 data-[open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 rounded-md border p-4 shadow-md outline-hidden\",\n            className,\n          )}\n          {...props}\n        />\n      </PopoverPrimitive.Positioner>\n    </PopoverPrimitive.Portal>\n  );\n}\n\nfunction PopoverAnchor({ ...props }: React.ComponentProps<\"div\">) {\n  return <div data-slot=\"popover-anchor\" {...props} />;\n}\n\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor };\n",
      "type": "registry:ui",
      "target": "components/ui/popover.tsx"
    }
  ]
}