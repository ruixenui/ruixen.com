{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "playlist-carousel",
  "type": "registry:ui",
  "title": "Playlist Carousel",
  "description": "A horizontal carousel of playable tracks with album art, progress bars, and embla-carousel navigation.",
  "dependencies": [
    "lucide-react",
    "embla-carousel-react"
  ],
  "files": [
    {
      "path": "registry/ruixenui/playlist-carousel.tsx",
      "content": "\"use client\";\n\nimport * as React from \"react\";\nimport useEmblaCarousel from \"embla-carousel-react\";\nimport { ChevronLeft, ChevronRight, Pause, Play } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\nexport interface Track {\n  id: string;\n  title: string;\n  artist: string;\n  cover: string;\n  duration: string;\n  src: string;\n}\n\ninterface PlaylistCarouselProps {\n  tracks: Track[];\n  className?: string;\n}\n\nexport default function PlaylistCarousel({\n  tracks,\n  className,\n}: PlaylistCarouselProps) {\n  const [emblaRef, emblaApi] = useEmblaCarousel({\n    align: \"start\",\n    slidesToScroll: 1,\n    containScroll: \"trimSnaps\",\n  });\n\n  const audioRef = React.useRef<HTMLAudioElement | null>(null);\n  const [activeTrack, setActiveTrack] = React.useState<string | null>(null);\n  const [isPlaying, setIsPlaying] = React.useState(false);\n  const [progress, setProgress] = React.useState(0);\n  const [currentTime, setCurrentTime] = React.useState(\"0:00\");\n  const [canScrollPrev, setCanScrollPrev] = React.useState(false);\n  const [canScrollNext, setCanScrollNext] = React.useState(false);\n\n  React.useEffect(() => {\n    if (!emblaApi) return;\n    const onSelect = () => {\n      setCanScrollPrev(emblaApi.canScrollPrev());\n      setCanScrollNext(emblaApi.canScrollNext());\n    };\n    emblaApi.on(\"select\", onSelect);\n    emblaApi.on(\"reInit\", onSelect);\n    onSelect();\n    return () => {\n      emblaApi.off(\"select\", onSelect);\n      emblaApi.off(\"reInit\", onSelect);\n    };\n  }, [emblaApi]);\n\n  React.useEffect(() => {\n    return () => {\n      if (audioRef.current) {\n        audioRef.current.pause();\n        audioRef.current.src = \"\";\n      }\n    };\n  }, []);\n\n  const formatTime = (seconds: number) => {\n    const m = Math.floor(seconds / 60);\n    const s = Math.floor(seconds % 60);\n    return `${m}:${s < 10 ? \"0\" : \"\"}${s}`;\n  };\n\n  const handlePlay = (track: Track) => {\n    if (activeTrack === track.id) {\n      if (isPlaying) {\n        audioRef.current?.pause();\n        setIsPlaying(false);\n      } else {\n        audioRef.current?.play().catch(() => {});\n        setIsPlaying(true);\n      }\n      return;\n    }\n\n    if (audioRef.current) {\n      audioRef.current.pause();\n      audioRef.current.src = \"\";\n    }\n\n    const audio = new Audio(track.src);\n    audioRef.current = audio;\n\n    audio.addEventListener(\"timeupdate\", () => {\n      const pct = (audio.currentTime / (audio.duration || 1)) * 100;\n      setProgress(pct);\n      setCurrentTime(formatTime(audio.currentTime));\n    });\n\n    audio.addEventListener(\"ended\", () => {\n      setIsPlaying(false);\n      setProgress(0);\n      setCurrentTime(\"0:00\");\n    });\n\n    audio.play().catch(() => setIsPlaying(false));\n    setActiveTrack(track.id);\n    setIsPlaying(true);\n  };\n\n  return (\n    <div className={cn(\"relative\", className)}>\n      <div ref={emblaRef} className=\"overflow-hidden\">\n        <div className=\"-ml-3 flex\">\n          {tracks.map((track) => {\n            const isActive = activeTrack === track.id;\n            return (\n              <div key={track.id} className=\"min-w-0 flex-[0_0_180px] pl-3\">\n                <div className=\"group rounded-xl border border-border/40 bg-card p-2.5 shadow-xs transition-shadow hover:shadow-md\">\n                  <div className=\"relative mb-2.5 overflow-hidden rounded-lg\">\n                    <img\n                      src={track.cover}\n                      alt={track.title}\n                      className=\"aspect-square w-full object-cover\"\n                      loading=\"lazy\"\n                    />\n                    <button\n                      onClick={() => handlePlay(track)}\n                      className=\"absolute inset-0 flex items-center justify-center bg-black/0 transition-colors group-hover:bg-black/25\"\n                      aria-label={\n                        isActive && isPlaying\n                          ? `Pause ${track.title}`\n                          : `Play ${track.title}`\n                      }\n                    >\n                      <div\n                        className={cn(\n                          \"flex size-10 items-center justify-center rounded-full bg-white shadow-md transition-all\",\n                          isActive && isPlaying\n                            ? \"scale-100 opacity-100\"\n                            : \"scale-90 opacity-0 group-hover:scale-100 group-hover:opacity-100\",\n                        )}\n                      >\n                        {isActive && isPlaying ? (\n                          <Pause className=\"size-4 fill-black text-black\" />\n                        ) : (\n                          <Play className=\"ml-0.5 size-4 fill-black text-black\" />\n                        )}\n                      </div>\n                    </button>\n                  </div>\n\n                  <p className=\"truncate text-sm font-medium text-card-foreground\">\n                    {track.title}\n                  </p>\n                  <p className=\"truncate text-xs text-muted-foreground\">\n                    {track.artist}\n                  </p>\n\n                  {isActive && (\n                    <div className=\"mt-2 space-y-0.5\">\n                      <div className=\"h-[3px] w-full overflow-hidden rounded-full bg-muted\">\n                        <div\n                          className=\"h-full rounded-full bg-foreground transition-[width] duration-200\"\n                          style={{ width: `${progress}%` }}\n                        />\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-[10px] tabular-nums text-muted-foreground\">\n                          {currentTime}\n                        </span>\n                        <span className=\"text-[10px] tabular-nums text-muted-foreground\">\n                          {track.duration}\n                        </span>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n\n      {canScrollPrev && (\n        <button\n          onClick={() => emblaApi?.scrollPrev()}\n          className=\"absolute -left-3 top-[40%] flex size-7 -translate-y-1/2 items-center justify-center rounded-full border border-border bg-card shadow-sm transition-colors hover:bg-muted\"\n          aria-label=\"Previous\"\n        >\n          <ChevronLeft className=\"size-4 text-muted-foreground\" />\n        </button>\n      )}\n\n      {canScrollNext && (\n        <button\n          onClick={() => emblaApi?.scrollNext()}\n          className=\"absolute -right-3 top-[40%] flex size-7 -translate-y-1/2 items-center justify-center rounded-full border border-border bg-card shadow-sm transition-colors hover:bg-muted\"\n          aria-label=\"Next\"\n        >\n          <ChevronRight className=\"size-4 text-muted-foreground\" />\n        </button>\n      )}\n    </div>\n  );\n}\n",
      "type": "registry:ui",
      "target": "components/ruixen/playlist-carousel.tsx"
    }
  ]
}